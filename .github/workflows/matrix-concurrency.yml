name: MatrixConcurrency
concurrency: matrix_concurrency_${{ github.ref_name }}
on: 
  pull_request:
  workflow_dispatch:

jobs:
  matrix-job:
    name: Matrix Concurrency
    runs-on: ubuntu-latest
    strategy:
      matrix: 
        environment: [qa,staging,production,sandbox]
      max-parallel: 1
    steps:
      - name: Do some stuff in ${{ matrix.environment }}
        run: |
          echo "Do some stuff $(date +%T)"
          sleep 30
          echo "Done some stuff $(date +%T)"
